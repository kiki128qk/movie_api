<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Movie</title>
</head>
<body>
    <div class="sarch-Box">
        <input type="text" class="sarchInput">
        <button type="button" class="sendBtn">검색</button>

    </div>
    <!-- jquery src -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        $(function(){
            let searchValue = document.location.href.split("=")[1];
            let decodeValue = decodeURI(searchValue);
            console.log(searchValue);

            $.ajax({
                type:"POST",
                url:"/movie_api/data/api.php",
                success: function (data) {
                   let obj =JSON.parse(data);
                //    console.log(obj);
                //    console.log(obj.items.length);
                if(obj.items.length == 0){
                    alert("데이터가 없습니다.");
                    location.href="/movie_api/index.html";
                    }

                function searchMovie(){
                    let searchMovie=$(".sarchInput").val();

                    if(!sarchResult){
                        alert("검색어를 입력해 주세요.");
                        return false;
                    }
                    location.href="/movie_api/search.html?key="+saerchResult;
                }
           $(".sendBtn").click(function(){
               searchMovie();
           });
           //press enter
           document.addEventListener('keydown', function(e){
               const keyCode = e.keyCode;
               if(keyCode==13){
                   searchMovie();
               }
           })
        });
    </script>
</body>
</html>